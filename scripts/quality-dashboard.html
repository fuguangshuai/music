<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🔍 音乐播放器 - 代码质量仪表板</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .dashboard {
        max-width: 1400px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
      }

      .header h1 {
        color: #2d3748;
        font-size: 2.5rem;
        margin-bottom: 10px;
      }

      .header p {
        color: #718096;
        font-size: 1.1rem;
      }

      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 40px;
      }

      .metric-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        border-left: 5px solid;
        transition: transform 0.3s ease;
      }

      .metric-card:hover {
        transform: translateY(-5px);
      }

      .metric-card.excellent {
        border-left-color: #48bb78;
      }
      .metric-card.good {
        border-left-color: #4299e1;
      }
      .metric-card.warning {
        border-left-color: #ed8936;
      }
      .metric-card.critical {
        border-left-color: #f56565;
      }

      .metric-value {
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .metric-label {
        color: #718096;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .metric-trend {
        margin-top: 10px;
        font-size: 0.8rem;
      }

      .trend-up {
        color: #48bb78;
      }
      .trend-down {
        color: #f56565;
      }
      .trend-stable {
        color: #4299e1;
      }

      .charts-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 40px;
      }

      .chart-container {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }

      .chart-title {
        font-size: 1.3rem;
        font-weight: bold;
        color: #2d3748;
        margin-bottom: 20px;
        text-align: center;
      }

      .issues-section {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .section-title {
        font-size: 1.5rem;
        font-weight: bold;
        color: #2d3748;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .issue-list {
        list-style: none;
      }

      .issue-item {
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 10px;
        border-left: 4px solid;
        background: #f7fafc;
      }

      .issue-item.critical {
        border-left-color: #f56565;
        background: #fed7d7;
      }
      .issue-item.warning {
        border-left-color: #ed8936;
        background: #feebc8;
      }
      .issue-item.info {
        border-left-color: #4299e1;
        background: #bee3f8;
      }

      .recommendations {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }

      .recommendation-item {
        padding: 15px;
        margin-bottom: 15px;
        border-radius: 10px;
        background: #f0fff4;
        border-left: 4px solid #48bb78;
      }

      .timestamp {
        text-align: center;
        color: #718096;
        font-size: 0.9rem;
        margin-top: 30px;
      }

      .score-circle {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        font-size: 2rem;
        font-weight: bold;
        color: white;
      }

      .score-excellent {
        background: linear-gradient(135deg, #48bb78, #38a169);
      }
      .score-good {
        background: linear-gradient(135deg, #4299e1, #3182ce);
      }
      .score-warning {
        background: linear-gradient(135deg, #ed8936, #dd6b20);
      }
      .score-critical {
        background: linear-gradient(135deg, #f56565, #e53e3e);
      }

      @media (max-width: 768px) {
        .charts-section {
          grid-template-columns: 1fr;
        }

        .metrics-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="dashboard">
      <div class="header">
        <h1>🔍 代码质量仪表板</h1>
        <p>音乐播放器项目质量监控</p>
      </div>

      <!-- 总体评分 -->
      <div class="metric-card" style="text-align: center; margin-bottom: 30px">
        <div id="scoreCircle" class="score-circle">
          <span id="overallScore">45</span>
        </div>
        <div class="metric-label">总体质量评分</div>
        <div class="metric-trend trend-down">📉 需要重点改进</div>
      </div>

      <!-- 关键指标 -->
      <div class="metrics-grid">
        <div class="metric-card critical">
          <div class="metric-value" style="color: #f56565">365</div>
          <div class="metric-label">TypeScript 错误</div>
          <div class="metric-trend trend-down">📉 需要立即修复</div>
        </div>

        <div class="metric-card excellent">
          <div class="metric-value" style="color: #48bb78">100%</div>
          <div class="metric-label">测试通过率</div>
          <div class="metric-trend trend-stable">✅ 优秀</div>
        </div>

        <div class="metric-card excellent">
          <div class="metric-value" style="color: #48bb78">0</div>
          <div class="metric-label">安全漏洞</div>
          <div class="metric-trend trend-stable">🔒 安全</div>
        </div>

        <div class="metric-card warning">
          <div class="metric-value" style="color: #ed8936">77</div>
          <div class="metric-label">高复杂度文件</div>
          <div class="metric-trend trend-down">⚠️ 需要重构</div>
        </div>

        <div class="metric-card critical">
          <div class="metric-value" style="color: #f56565">1106</div>
          <div class="metric-label">重复代码块</div>
          <div class="metric-trend trend-down">🔄 需要清理</div>
        </div>

        <div class="metric-card excellent">
          <div class="metric-value" style="color: #48bb78">0</div>
          <div class="metric-label">ESLint 错误</div>
          <div class="metric-trend trend-stable">✅ 规范</div>
        </div>
      </div>

      <!-- 图表区域 -->
      <div class="charts-section">
        <div class="chart-container">
          <div class="chart-title">📊 问题分布</div>
          <canvas id="issuesChart"></canvas>
        </div>

        <div class="chart-container">
          <div class="chart-title">📈 质量趋势</div>
          <canvas id="trendChart"></canvas>
        </div>
      </div>

      <!-- 关键问题 -->
      <div class="issues-section">
        <div class="section-title">🚨 关键问题</div>
        <ul class="issue-list">
          <li class="issue-item critical">
            <strong>365个 TypeScript 类型错误</strong>
            <p>主要集中在核心模块和示例代码中，需要立即修复以提高类型安全</p>
          </li>
          <li class="issue-item warning">
            <strong>77个高复杂度文件</strong>
            <p>建议重构复杂度过高的文件，提高代码可维护性</p>
          </li>
          <li class="issue-item warning">
            <strong>1106个重复代码块</strong>
            <p>存在大量重复代码，建议提取公共组件和工具函数</p>
          </li>
        </ul>
      </div>

      <!-- 改进建议 -->
      <div class="recommendations">
        <div class="section-title">💡 改进建议</div>
        <div class="recommendation-item">
          <strong>1. 修复 TypeScript 类型错误</strong>
          <p>优先修复高优先级的类型错误，特别是空值安全和未初始化属性问题</p>
        </div>
        <div class="recommendation-item">
          <strong>2. 重构高复杂度文件</strong>
          <p>将复杂的函数拆分为更小的、单一职责的函数</p>
        </div>
        <div class="recommendation-item">
          <strong>3. 清理重复代码</strong>
          <p>提取公共组件和工具函数，减少代码重复</p>
        </div>
        <div class="recommendation-item">
          <strong>4. 建立质量门禁</strong>
          <p>在CI/CD中集成代码质量检查，防止质量回退</p>
        </div>
      </div>

      <div class="timestamp">最后更新: <span id="lastUpdate">2025-08-08 00:54:57</span></div>
    </div>

    <script>
      // 设置总体评分圆圈样式
      const scoreElement = document.getElementById('overallScore');
      const scoreCircle = document.getElementById('scoreCircle');
      const score = 45;

      if (score >= 80) {
        scoreCircle.className = 'score-circle score-excellent';
      } else if (score >= 60) {
        scoreCircle.className = 'score-circle score-good';
      } else if (score >= 40) {
        scoreCircle.className = 'score-circle score-warning';
      } else {
        scoreCircle.className = 'score-circle score-critical';
      }

      // 问题分布图表
      const issuesCtx = document.getElementById('issuesChart').getContext('2d');
      new Chart(issuesCtx, {
        type: 'doughnut',
        data: {
          labels: ['TypeScript错误', '高复杂度文件', '重复代码', '其他'],
          datasets: [
            {
              data: [365, 77, 1106, 50],
              backgroundColor: ['#f56565', '#ed8936', '#4299e1', '#718096'],
              borderWidth: 0,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'bottom',
            },
          },
        },
      });

      // 质量趋势图表
      const trendCtx = document.getElementById('trendChart').getContext('2d');
      new Chart(trendCtx, {
        type: 'line',
        data: {
          labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月'],
          datasets: [
            {
              label: '质量评分',
              data: [30, 35, 40, 38, 42, 45, 43, 45],
              borderColor: '#4299e1',
              backgroundColor: 'rgba(66, 153, 225, 0.1)',
              tension: 0.4,
              fill: true,
            },
          ],
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              max: 100,
            },
          },
          plugins: {
            legend: {
              display: false,
            },
          },
        },
      });

      // 更新时间戳
      document.getElementById('lastUpdate').textContent = new Date().toLocaleString('zh-CN');
    </script>
  </body>
</html>
