/**
 * ğŸ¯ å¢å¼ºå‹APIç±»å‹å®šä¹‰
 * åŸºäºç°æœ‰APIå“åº”ç»“æ„ï¼Œæä¾›æ›´ç²¾ç¡®çš„ç±»å‹å®šä¹‰
 *
 * è®¾è®¡åŸåˆ™ï¼š
 * - æ ¸å¿ƒä¸šåŠ¡ç±»å‹ï¼šç²¾ç¡®å®šä¹‰
 * - ä¸´æ—¶/ä¸ç¨³å®šAPIï¼šä½¿ç”¨SafeAny
 * - ç¬¬ä¸‰æ–¹åº“é›†æˆï¼šä½¿ç”¨ThirdPartyData
 */

// å¯¼å…¥åŸºç¡€ç±»å‹å·¥å…·
import type { SafeAny } from '../utils/typeHelpers';

// ==================== åŸºç¡€å“åº”ç»“æ„ ====================

/**
 * æ ‡å‡†APIå“åº”ç»“æ„
 */
export interface StandardApiResponse<T = unknown> {
  code: number;
  message?: string;
  data?: T;
  timestamp?: number;
}

/**
 * åˆ†é¡µå“åº”ç»“æ„
 */
export interface PaginatedApiResponse<T> extends StandardApiResponse<T[0]> {
  total: number;
  hasMore: boolean;
  offset: number;
  limit: number;
}

// ==================== éŸ³ä¹ç›¸å…³ç±»å‹ ====================

/**
 * è‰ºæœ¯å®¶ä¿¡æ¯
 */
export interface EnhancedArtist {
  id: number;
  name: string;
  picUrl?: string;
  alias?: string[0];
  briefDesc?: string;
  albumSize?: number;
  musicSize?: number;
  mvSize?: number;
  followed?: boolean;
  trans?: string;
}

/**
 * ä¸“è¾‘ä¿¡æ¯
 */
export interface EnhancedAlbum {
  id: number;
  name: string;
  picUrl?: string;
  artist?: EnhancedArtist;
  artists?: EnhancedArtist[0];
  publishTime?: number;
  size?: number;
  status?: number;
  copyrightId?: number;
  commentThreadId?: string;
  blurPicUrl?: string;
  companyId?: number;
  pic?: number;
  tags?: string;
  company?: string;
  briefDesc?: string;
  description?: string;
  subType?: string;
  alias?: string[0];
  transName?: string;
}

/**
 * æ­Œæ›²ä¿¡æ¯ï¼ˆå¢å¼ºç‰ˆï¼‰
 */
export interface EnhancedSong {
  id: number;
  name: string;
  artists: EnhancedArtist[0];
  album: EnhancedAlbum;
  duration: number;
  copyrightId?: number;
  status?: number;
  alias?: string[0];
  rtype?: number;
  ftype?: number;
  mvid?: number;
  fee?: number;
  rUrl?: string | null;
  mark?: number;
  originCoverType?: number;
  originSongSimpleData?: SafeAny; // å¤æ‚åµŒå¥—ç»“æ„ï¼Œä½¿ç”¨SafeAny
  tagPicList?: SafeAny; // æ ‡ç­¾å›¾ç‰‡åˆ—è¡¨ï¼Œç»“æ„å¯èƒ½å˜åŒ–
  resourceState?: boolean;
  version?: number;
  songJumpInfo?: SafeAny; // è·³è½¬ä¿¡æ¯ï¼Œç»“æ„ä¸ç¨³å®š
  entertainmentTags?: SafeAny; // å¨±ä¹æ ‡ç­¾ï¼Œç¬¬ä¸‰æ–¹æ•°æ®
  awardTags?: SafeAny; // å¥–é¡¹æ ‡ç­¾ï¼Œç¬¬ä¸‰æ–¹æ•°æ®
  single?: number;
  noCopyrightRcmd?: SafeAny; // ç‰ˆæƒæ¨èï¼Œç»“æ„å¤æ‚
  mst?: number;
  cp?: number;
  mv?: number;
  publishTime?: number;
  tns?: string[0];
  // æ’­æ”¾ç›¸å…³
  playMusicUrl?: string;
  rtUrl?: string | null;
  rtUrls?: string[0];
  // æ‰©å±•ä¿¡æ¯
  transName?: string | null;
  count?: number;
}

/**
 * æ’­æ”¾åˆ—è¡¨ä¿¡æ¯
 */
export interface EnhancedPlaylist {
  id: number;
  name: string;
  coverImgUrl?: string;
  creator?: {
    userId: number;
    nickname: string;
    avatarUrl?: string;
    signature?: string;
    userType?: number;
    vipType?: number;
  };
  description?: string;
  tags?: string[0];
  playCount?: number;
  trackCount?: number;
  subscribedCount?: number;
  shareCount?: number;
  commentCount?: number;
  subscribed?: boolean;
  createTime?: number;
  updateTime?: number;
  userId?: number;
  status?: number;
  privacy?: number;
  newImported?: boolean;
  specialType?: number;
  anonimous?: boolean;
  coverStatus?: number;
  recommendInfo?: SafeAny; // æ¨èä¿¡æ¯ï¼Œç»“æ„å¯èƒ½å˜åŒ–
  relateResType?: SafeAny; // ç›¸å…³èµ„æºç±»å‹ï¼Œç¬¬ä¸‰æ–¹æ•°æ®
  subscribers?: SafeAny[0]; // è®¢é˜…è€…åˆ—è¡¨ï¼Œç»“æ„å¤æ‚
  tracks?: EnhancedSong[0];
  trackIds?: Array<{
    id: number;
    v?: number;
    t?: number;
    at?: number;
    alg?: string;
    uid?: number;
    rcmdReason?: string;
    sc?: SafeAny; // æ¥æºä¿¡æ¯ï¼Œç»“æ„ä¸ç¨³å®š
  }>;
}

// ==================== ç”¨æˆ·ç›¸å…³ç±»å‹ ====================

/**
 * ç”¨æˆ·ä¿¡æ¯ï¼ˆå¢å¼ºç‰ˆï¼‰
 */
export interface EnhancedUser {
  userId: number;
  nickname: string;
  avatarUrl?: string;
  backgroundUrl?: string;
  signature?: string;
  gender?: number;
  birthday?: number;
  province?: number;
  city?: number;
  userType?: number;
  vipType?: number;
  accountStatus?: number;
  authStatus?: number;
  djStatus?: number;
  defaultAvatar?: boolean;
  expertTags?: SafeAny; // ä¸“å®¶æ ‡ç­¾ï¼Œç¬¬ä¸‰æ–¹æ•°æ®
  experts?: SafeAny; // ä¸“å®¶ä¿¡æ¯ï¼Œç»“æ„å¤æ‚
  mutual?: boolean;
  followed?: boolean;
  authority?: number;
  description?: string;
  detailDescription?: string;
  avatarImgId?: number;
  backgroundImgId?: number;
  avatarImgIdStr?: string;
  backgroundImgIdStr?: string;
  anchor?: boolean;
  // ç»Ÿè®¡ä¿¡æ¯
  followeds?: number;
  follows?: number;
  playlistCount?: number;
  playlistBeSubscribedCount?: number;
  // æ‰©å±•ä¿¡æ¯ï¼ˆå¯èƒ½æ¥è‡ªç¬¬ä¸‰æ–¹ï¼‰
  profile?: SafeAny; // æ¡£æ¡ˆä¿¡æ¯ï¼Œç»“æ„å¯èƒ½å˜åŒ–
  level?: number;
  listenSongs?: number;
  createTime?: number;
  createDays?: number;
  pcSign?: boolean;
  mobileSign?: boolean;
}

/**
 * ç™»å½•å“åº”
 */
export interface EnhancedLoginResponse {
  code: number;
  message?: string;
  loginType?: number;
  account?: {
    id: number;
    userName: string;
    type: number;
    status: number;
    whitelistAuthority: number;
    createTime: number;
    tokenVersion: number;
    ban: number;
    baoyueVersion: number;
    donateVersion: number;
    vipType: number;
    viptypeVersion: number;
    anonimousUser: boolean;
    uninitialized: boolean;
  };
  token?: string;
  profile?: EnhancedUser;
  bindings?: SafeAny[0]; // ç»‘å®šä¿¡æ¯ï¼Œç¬¬ä¸‰æ–¹æ•°æ®
  cookie?: string;
}

// ==================== æœç´¢ç›¸å…³ç±»å‹ ====================

/**
 * æœç´¢ç»“æœ
 */
export interface EnhancedSearchResult {
  songs?: {
    songs: EnhancedSong[0];
    songCount: number;
    hasMore: boolean;
  };
  artists?: {
    artists: EnhancedArtist[0];
    artistCount: number;
    hasMore: boolean;
  };
  albums?: {
    albums: EnhancedAlbum[0];
    albumCount: number;
    hasMore: boolean;
  };
  playlists?: {
    playlists: EnhancedPlaylist[0];
    playlistCount: number;
    hasMore: boolean;
  };
  mvs?: {
    mvs: SafeAny[0]; // MVç»“æ„å¤æ‚ï¼Œä½¿ç”¨SafeAny,
    mvCount: number;
    hasMore: boolean;
  };
  djRadios?: {
    djRadios: SafeAny[0]; // ç”µå°ç»“æ„å¤æ‚ï¼Œä½¿ç”¨SafeAny,
    djRadiosCount: number;
    hasMore: boolean;
  };
  users?: {
    users: EnhancedUser[0];
    userCount: number;
    hasMore: boolean;
  };
  order?: string[0];
}

// ==================== APIå“åº”ç±»å‹ ====================

/**
 * æ­Œæ›²è¯¦æƒ…å“åº”
 */
export type SongDetailResponse = StandardApiResponse<{
  songs: EnhancedSong[0];
  privileges: SafeAny[0]; // æƒé™ä¿¡æ¯ï¼Œç»“æ„å¤æ‚
}>;

/**
 * æ­Œæ›²URLå“åº”
 */
export type SongUrlResponse = StandardApiResponse<{
  data: Array<{
    id: number;
    url: string | null;
    br: number;
    size: number;
    md5: string;
    code: number;
    expi: number;
    type: string;
    gain: number;
    fee: number;
    uf: SafeAny; // ç”¨æˆ·æ ‡è¯†ï¼Œç»“æ„ä¸ç¨³å®š,
    payed: number;
    flag: number;
    canExtend: boolean;
    freeTrialInfo: SafeAny | null; // è¯•å¬ä¿¡æ¯ï¼Œç¬¬ä¸‰æ–¹æ•°æ®,
    level: string;
    encodeType: string;
    freeTrialPrivilege: SafeAny; // è¯•å¬æƒé™ï¼Œç»“æ„å¤æ‚,
    freeTimeTrialPrivilege: SafeAny; // æ—¶é•¿è¯•å¬æƒé™ï¼Œç»“æ„å¤æ‚,
    urlSource: number;
    rightSource: number;
    podcastCtrp: SafeAny | null; // æ’­å®¢æ§åˆ¶ï¼Œç¬¬ä¸‰æ–¹æ•°æ®,
    effectTypes: SafeAny | null; // éŸ³æ•ˆç±»å‹ï¼Œç»“æ„å¯èƒ½å˜åŒ–,
    time: number;
  }>;
}>;

/**
 * æœç´¢å“åº”
 */
export type SearchResponse = StandardApiResponse<{
  result: EnhancedSearchResult;
}>;

/**
 * ç”¨æˆ·æ’­æ”¾è®°å½•å“åº”
 */
export type UserRecordResponse = StandardApiResponse<{
  weekData?: Array<{
    song: EnhancedSong;
    playCount: number;
    score: number;
  }>;
  allData?: Array<{
    song: EnhancedSong;
    playCount: number;
    score: number;
  }>;
}>;

// ==================== å¯¼å‡ºç±»å‹åˆ«å ====================

/**
 * å¸¸ç”¨ç±»å‹åˆ«å
 */
export type Song = EnhancedSong;
export type Artist = EnhancedArtist;
export type Album = EnhancedAlbum;
export type Playlist = EnhancedPlaylist;
export type User = EnhancedUser;
export type SearchResult = EnhancedSearchResult;
export type LoginResponse = EnhancedLoginResponse;

/**
 * APIå“åº”ç±»å‹åˆ«å
 */
export type ApiResponse<T = unknown> = StandardApiResponse<T>;
export type PaginatedResponse<T> = PaginatedApiResponse<T>;
